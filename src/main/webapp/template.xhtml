<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:head>
	<title>#{title}</title>
	<h:outputStylesheet library="css" name="tyylit.css" />
</h:head>
<h:body style="padding: 60px;">
	<ui:insert name="metadata" />
	<f:view>
		<b:navBar brand="Akkis" brandHref="index.xhtml" fixed="top"
			inverse="true">
			<b:navbarLinks>
				<b:navLink value="Home" active="#{tab=='home'}" href="index.xhtml"></b:navLink>
				<b:navLink value="Users" rendered="#{loginUser.can('VIEW_USERS')}" active="#{tab=='users'}" href="users.xhtml"></b:navLink>
				<b:navLink value="Customer" rendered="#{loginUser.can('VIEW_CUSTOMERS')}" active="#{tab=='customer'}" href="customer.xhtml"></b:navLink>
				<b:navLink value="Company" rendered="#{loginUser.can('VIEW_COMPANIES')}" active="#{tab=='company'}" href="company.xhtml"></b:navLink>
                <b:navLink value="Deliveries" rendered="#{loginUser.can('VIEW_DELIVERIES')}" active="#{tab=='deliveries'}" href="delivery.xhtml"></b:navLink>
                <b:navLink value="Invoice" rendered="#{loginUser.can('VIEW_INVOICES')}" active="#{tab=='invoice'}" href="invoice.xhtml"></b:navLink>
                <b:navLink value="Product" rendered="#{loginUser.can('VIEW_PRODUCTS')}" active="#{tab=='product'}" href="product.xhtml"></b:navLink>        
            </b:navbarLinks>
            <h:form styleClass="navbar-form navbar-right" rendered="#{!loginUser.logged}">
                <div class="form-group">
                    <b:inputText placeholder="Username" value="#{loginUser.username}" fieldSize="sm"/>
                </div>
                <div class="form-group">
                    <b:inputSecret placeholder="Password" value="#{loginUser.password}" fieldSize="sm"/>
                </div> 
                #{' '}
                <b:commandButton value="Sign in" look="success"
					icon="chevron-right" iconAlign="right"
					action="#{loginController.login}" />
			</h:form>
			<h:form styleClass="navbar-form navbar-right"
				rendered="#{loginUser.logged}">
				<b:commandButton value="Logout" look="success" icon="chevron-right"
					iconAlign="right" action="#{loginController.logout}" />
			</h:form>
			<h:panelGroup class="navbar-text navbar-right" rendered="#{loginUser.logged}">
				#{loginUser.user.name}
			</h:panelGroup>
		</b:navBar>
		<b:container>
	       	<b:messages id="messages" />
	       	
	       	<h:panelGroup rendered="#{pagePermission != null ? !loginUser.can(pagePermission) : false}">
	       		You do not have permission to access this page.       		
	       	</h:panelGroup>
	       	
	       	<h:panelGroup rendered="#{pagePermission != null ? loginUser.can(pagePermission) : true}">
				<ui:insert name="content">
				</ui:insert>
			</h:panelGroup>
		</b:container>
	</f:view>
</h:body>
</html>