<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:head>
	<title>Kauppa Oy</title>
	<h:outputStylesheet library="css" name="tyylit.css" />
</h:head>
<h:body>

	<h1>Kauppa Oy</h1>

	<h2>Tuotelistaus</h2>
	<h:form id="mainform">
		<h:dataTable styleClass="data" cellspacing="0" cellpadding="0"
			border="0" rowClasses="odd,even" value="#{tuoteController.tuotteet}"
			var="b">
			<h:column headerstyleClass="first">
				<f:facet name="header">Tuote</f:facet>
                    #{b.name}
            </h:column>
            <h:column headerstyleClass="first">
				<f:facet name="header">Hinta</f:facet>
                    #{b.price} €
            </h:column>
            <h:column headerstyleClass="first">
				<f:facet name="header"></f:facet>
                    <h:commandButton action="#{tuoteController.addToCart(b)}" value="Lisää ostoskoriin" />
            </h:column>
		</h:dataTable>
	</h:form>
	
	<h2>Ostoskori</h2>
	
	<h:form id="ostoskori" rendered="#{tilaus.rivit.size() > 0}">
		<h:dataTable styleClass="data" cellspacing="0" cellpadding="0"
			border="0" rowClasses="odd,even" value="#{tuoteController.tilaus.rivit}"
			var="b">
			<h:column headerstyleClass="first">
				<f:facet name="header">Tuote</f:facet>
                    #{b.tuote.name}
            </h:column>
            <h:column headerstyleClass="first">
				<f:facet name="header">Hinta</f:facet>
				
                    #{b.price} €
            </h:column>
            <f:facet name="footer">
		        <h:panelGroup style="display:block; text-align:right">
		            Yhteensä: #{tilaus.total} €
		        </h:panelGroup>
    		</f:facet>
		</h:dataTable>
		
		<div>Nimi: <h:inputText id="nimi" value="#{tilaus.name}" /></div>
		
		<h:commandButton action="#{tuoteController.submitOrder}" value="Tilaa" />
	</h:form>
	<h:panelGroup rendered="#{tilaus.rivit.size() == 0}">
		Ostoskori on tyhjä!
	</h:panelGroup>
	
	<div style="color: red">
		<h:messages globalOnly="true" />
	</div>
	
	<h2>Admin</h2>
	
	<h:form id="adminform">
		<table>
			<tr>
				<td><h:commandButton action="#{tuoteController.initialize()}" value="lisää oletustuotteita" /></td>
				<td><a href="orders.xhtml">Tilaukset</a></td>
				<td><a href="addproduct.xhtml">Tuotteiden lisäys</a></td>
			</tr>
		</table>
	</h:form>

</h:body>

</html>
